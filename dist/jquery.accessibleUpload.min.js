!function(e){var i=function(i,s){this.accessibleUpload=e(i),this.defaults={labels:{selectedFileCount:"files selected"}},this.classes=e.extend(!0,this.defaults.classes,window.project?window.project.classes:{}),this.labels=e.extend(!0,this.defaults.labels,window.project?window.project.labels:{}),this.config=e.extend(!0,this.defaults,s||{}),this.init()};e.extend(i.prototype,{init:function(i){var s=this._createFilenameHolder(this);e(s).insertAfter(this.accessibleUpload),this.accessibleUpload.next(".lbo-aif").on("click","button",{input:this},e.proxy(this._fileRemove,this)),this.accessibleUpload.on("change.lbo-aif","",{holder:s},e.proxy(this._change,this)),this.accessibleUpload.change(e.proxy(function(){this.accessibleUpload.trigger("change.aif")},this))},destroy:function(){this.accessibleUpload.next(".aif").remove(),this.accessibleUpload.unbind(".aif")},_createFilenameHolder:function(e){return'<span class="lbo-aif" style="display: none;"><span class="lbo-aif-filename" aria-live="polite"></span></span>'},_change:function(i){var s="";this.title&&(s='<span class="visuallyhidden">'+this.title+"</span>");var t=this._getFilename(e(i.currentTarget));this.accessibleUpload.hide(),0===this.accessibleUpload.next(".lbo-aif").find("button").length&&this.accessibleUpload.next(".lbo-aif").append('<button class="btn-supprimer"><span class="visuallyhidden">Supprimer '+t+".</span></button>"),this.accessibleUpload.next(".lbo-aif").show().find(".lbo-aif-filename").html(s+" "+t).attr("tabindex",0).focus()},_getFilename:function(e){return e.prop("files").length>1?e.prop("files").length+" "+this.labels.selectedFileCount:(filename=e.val().split("\\"),filename.pop())},_fileRemove:function(i){i.preventDefault(),this.accessibleUpload.next(".lbo-aif").remove();var s=e(i.data.input.accessibleUpload).clone();return e(i.data.input.accessibleUpload).replaceWith(s),s.show().focus().accessibleUpload(),!1}}),e.fn.accessibleUpload=function(s){return this.each(function(){var t=e(this);if(!t.data("accessibleUpload")){var a=new i(this,s);t.data("accessibleUpload",a)}})}}(jQuery);